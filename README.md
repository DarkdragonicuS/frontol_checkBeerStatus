# Frontol: Проверка состояния марок разливного пива на кранах
Скрипт для вывода информации о состоянии по данным системы Честный знак марок, привязанных к кранам, в интерфейсе кассового ПО ATOL Frontol 6. На данный момент позволяет выводить информацию об объеме подключенной кеги, остатке на ней продукции и сроках годности.

# Установка
1. Установить на кассовых местах [FireBird ODBC](https://sourceforge.net/projects/firebird/files/firebird-ODBC-driver/2.0.5-Release/Firebird_ODBC_2.0.5.156_Win32.exe)
2. Установить соответствующие значения параметров в файле `config.ini` и поместить в желаемое место (по умолчанию в `Frontol6\BIN`). Содержимое файла можно получить из [`config_template.ini`](config_template.ini).
3. При необходимости указать соответсвующий путь в `CONFIG_PATH` скрипта `main.js`
4. Установить скрип в базу Frontol. Также см. [Использование](#Использование).
5. В макете, где необходимо отображать информацию, необходимо добавить вывод желаемых глобальных пользовательских переменных:
   * `tapName_<код_крана>` - наименование крана
   * `wareName_<код_крана>` - наименование товара Frontol, поставленного на кран
   * `tapMark_<код_крана>` - привязанная к крану марка
   * `tapED_<код_крана>` - срок годности поставленной на кран продукции
   * `tapVol_<код_крана>` - остаток продукции в кеге в виде `<Остаток> / <Объем кеги>`

# Использование
В чистом виде скрипт обновляет информацию только при запуске программы. Можно модифицировать скрипт для вызова обновления по событиям. `updateTapInfo()` - основная функция, которую нужно использовать для обновления информации. Можно использовать скрипт в шаблоне чека, если используется базовый тариф.
Для работы скрипта необходим доступ до CDN-сервера ЦРПТ, указанного в `config.ini`.